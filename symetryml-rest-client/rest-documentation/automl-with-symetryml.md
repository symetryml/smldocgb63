# AutoML with SymetryML

AutoML with SymetryML is performed in two steps:

* When creating a new SymetryML project you need to specify that you want to enable AutoML for that project.
  * SymetryML will automatically enhance the data when it is ingested
  * More info in the [Create Project](symetryml-projects-rest-api.md#create-new-symetryml-project) section.
* Use the [Auto Select](auto-select-with-symetryml.md) functionality when building a new model

The following sections will describe both steps in more detail as well as the configuration available for each step.

## Enabling AutoML for Your SymetryML Project

AutoML automates various stages of the typical machine learning pipeline. SymetryMLâ€™s AutoML functionality allows to perform:

* Data pre-processing
  * Column Type Detection
  * Change Data Type of a column
  * One Hot Encoding
  * Target Encoding
  * Ignore Outliers
* Feature engineering
  * Create new features interaction based on existing features. The FAST algorithm is used to decide which feature interactions to be added
  * Attribute Filtering
    * Compute Feature importance
    * Remove attribute with multi-collinearity
    * Ignore low variance features
    * Singular Value Decomposition
* Model Building with Auto-Select
  * Automatically select type of models to build based on AutoML task - regression vs. binary classification supported.
  * Automatically select the best model from various permutations of the features. This is covered in the [Auto Select](auto-select-with-symetryml.md) section.
  * Automatically optimize model hyperparameters. This is covered in the [Auto Select](auto-select-with-symetryml.md) section.

## AutoML Control Parameters

| Family                | Name                                        | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| --------------------- | ------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| _general_             | **automl\_target\_name**                    | **string**, Column target name for the AutoML task                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| _general_             | **automl\_warmup\_size**                    | **integer**, default 100,000. This number is used when enabling the creation of new features based on existing feature interaction. In order to score the various possible combination of features some data is needed, this parameter controls how many tuples/rows to use to perform that calculation. Until that number of rows is processed by the project the project will appear empty. When invoking the [Get Project Info](symetryml-projects-rest-api.md#symetryml-project-information-about-one-project) endpoint the [ProjectInfo](appendix-a-json-data-structure-schema.md#projectinfo) `params` map will contain a key named `automl_setup_done` to inform whether or not the warmup period is done. |
| _pre-processing_      | **automl\_attributes\_to\_use**             | List of attribute names to use                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| _Attribute Filtering_ | **automl\_ignore\_outliers**                | **true \|false**, default:false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| _Attribute Filtering_ | **automl\_remove\_collinearity**            | **true\|false**, default:false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| _Attribute Filtering_ | **automl\_ignore\_low\_variance**           | **true\|false**, default:false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| _Attribute Filtering_ | **automl\_threshold\_variance**             | **double**, default:0.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| _Attribute Filtering_ | **automl\_use\_svd**                        | **true\|false**, default:false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| _Attribute Filtering_ | **automl\_vif\_filter**                     | **true\|false**, default:false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| _Attribute Filtering_ | **automl\_vif\_filter\_threshold**          | this is the threshold to use when `automl_vif_filter` is true, **double**, default:5.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| _Feature Engineering_ | **automl\_use\_feature\_importance**        | **true\|false**, default:false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| _Feature Engineering_ | **automl\_add\_feature\_interaction**       | **true\|false**, default:false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| _Feature Engineering_ | **automl\_feature\_interaction\_threshold** | **double**, default:1, percentage of interaction pairs to keep from the FAST algorithm.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| _Feature Engineering_ | **automl\_fast\_num\_bins**                 | **double**, default:16, number of bins to use for the FAST algorithm                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| _Feature Engineering_ | **automl\_fast\_num\_threads**              | **integer**, default:14, number of threads to use for the FAST algorithm                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| _Feature Engineering_ | **automl\_power**                           | **string**, comma separated string that describe which feature power to use. ex: `automl_power=2:3:5:yj` means add power 2, 3 and 5 as well as the Yeo-Johnson transform of the features.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |

## Auto ML Rest API

In order to activate AutoML for a SymetryML project you need to specify additional parameters when creating the project. This is done using the [Create Project](symetryml-projects-rest-api.md#create-new-symetryml-project) rest API and adding the AutoML parameters to the [MLContext](appendix-a-json-data-structure-schema.md#mlcontext-json) of the request body.

### AutoML Example

This example uses:

* Specify to use AutoML for the project: `"automl_project_is_automl":"true"`
* Specify to add feature interaction: `"automl_add_feature_interaction":"true"`
* Specify a warmup period: `"automl_warmup_size":"200"`
* Specify the target for the AutoML project: `"automl_target_name":"MEDV"`

```
Request:
POST url="http://charm:8080/symetry/rest/c1/projects?pid=automl-t6-reg-false&type=cpu&persist=false"

Body:
{"automl_warmup_size":"200","automl_add_feature_interaction":"true","automl_project_is_automl":"true","automl_target_name":"MEDV"}
```
